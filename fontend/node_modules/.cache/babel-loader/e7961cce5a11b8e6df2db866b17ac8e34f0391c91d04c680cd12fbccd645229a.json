{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport { log } from \"util\";\nimport { empty } from \"uuidv4\";\nfunction UseFatch(url) {\n  _s();\n  let {\n    method,\n    headers,\n    body\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const [data, setData] = useState();\n  const [errorStatus, setErrorStatus] = useState();\n  const navigate = useNavigate();\n  const location = useLocation();\n  function request() {\n    setLoading(true);\n    fetch(url, {\n      method: method,\n      headers: headers,\n      body: body\n    }).then(response => {\n      if (response.status === 401) {\n        navigate(\"/login\", {\n          state: {\n            previousUrl: location.pathname\n          }\n        });\n      }\n      if (!response.ok) {\n        throw response.status;\n      }\n      return response.json();\n    }).then(data => {\n      setData(data);\n    }).catch(e => {\n      setErrorStatus(e);\n    }).finally(() => {\n      setLoading(false);\n    });\n  }\n  function appendData(newData) {\n    fetch(url, {\n      method: \"POST\",\n      headers: headers,\n      body: JSON.stringify(newData)\n    }).then(response => {\n      if (response.status === 401) {\n        navigate(\"/login\", {\n          state: {\n            previousUrl: location.pathname\n          }\n        });\n      }\n      if (!response.ok) {\n        throw response.status;\n      }\n      return response.json();\n    }).then(d => {\n      const subbmited = Object.values(d)[0];\n      console.log(\"in the then\", subbmited);\n      console.log(data);\n      const newState = {\n        ...data\n      };\n      Object.values(newState)[0].push(subbmited);\n      setData(newState);\n    }).catch(e => {\n      console.log(\"Error :\", e);\n      setErrorStatus(e);\n    });\n  }\n  return {\n    request,\n    loading,\n    appendData,\n    data,\n    errorStatus\n  };\n}\n_s(UseFatch, \"tZKHJ1AZ1dBPliIRb0FmnNaibC4=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = UseFatch;\nexport default UseFatch;\nvar _c;\n$RefreshReg$(_c, \"UseFatch\");","map":{"version":3,"names":["useEffect","useState","Link","useLocation","useNavigate","log","empty","UseFatch","url","_s","method","headers","body","arguments","length","undefined","data","setData","errorStatus","setErrorStatus","navigate","location","request","setLoading","fetch","then","response","status","state","previousUrl","pathname","ok","json","catch","e","finally","appendData","newData","JSON","stringify","d","subbmited","Object","values","console","newState","push","loading","_c","$RefreshReg$"],"sources":["/media/mirajul/Backup/react-project/caleb-curry-coures/fontend/src/Hooks/UseFatch.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport { log } from \"util\";\nimport { empty } from \"uuidv4\";\n\nfunction UseFatch(url, { method, headers, body } = {}) {\n\tconst [data, setData] = useState();\n\tconst [errorStatus, setErrorStatus] = useState();\n\n\tconst navigate = useNavigate();\n\tconst location = useLocation();\n\n\tfunction request() {\n\t\tsetLoading(true);\n\n\t\tfetch(url, {\n\t\t\tmethod: method,\n\t\t\theaders: headers,\n\t\t\tbody: body,\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (response.status === 401) {\n\t\t\t\t\tnavigate(\"/login\", {\n\t\t\t\t\t\tstate: { previousUrl: location.pathname },\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow response.status;\n\t\t\t\t}\n\t\t\t\treturn response.json();\n\t\t\t})\n\t\t\t.then((data) => {\n\t\t\t\tsetData(data);\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tsetErrorStatus(e);\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tsetLoading(false);\n\t\t\t});\n\t}\n\n\tfunction appendData(newData) {\n\t\tfetch(url, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: headers,\n\t\t\tbody: JSON.stringify(newData),\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (response.status === 401) {\n\t\t\t\t\tnavigate(\"/login\", {\n\t\t\t\t\t\tstate: { previousUrl: location.pathname },\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow response.status;\n\t\t\t\t}\n\n\t\t\t\treturn response.json();\n\t\t\t})\n\t\t\t.then((d) => {\n\t\t\t\tconst subbmited = Object.values(d)[0];\n\t\t\t\tconsole.log(\"in the then\", subbmited);\n\t\t\t\tconsole.log(data);\n\n\t\t\t\tconst newState = { ...data };\n\t\t\t\tObject.values(newState)[0].push(subbmited);\n\n\t\t\t\tsetData(newState);\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tconsole.log(\"Error :\", e);\n\t\t\t\tsetErrorStatus(e);\n\t\t\t});\n\t}\n\n\treturn { request, loading, appendData, data, errorStatus };\n}\n\nexport default UseFatch;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}